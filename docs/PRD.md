# GameCode Lab 产品需求文档 (PRD)

**版本**: V1.0  
**创建日期**: 2025-10-14  
**产品经理**: AI Development Team  
**状态**: 开发中

---

## 一、产品概述

### 1.1 产品定位

GameCode Lab 是一个面向编程初学者的游戏化在线编程教育平台，通过 AI 驱动的智能教学系统，让用户在游戏化的学习体验中掌握 HTML5、CSS 和 JavaScript 基础开发技能。

### 1.2 目标用户

| 用户类型 | 特征描述 | 核心需求 |
|---------|---------|---------|
| **编程零基础学生** | 年龄 12-25 岁，对编程感兴趣但无经验 | 趣味性强、循序渐进、即时反馈 |
| **在职转行者** | 25-35 岁，希望转行从事前端开发 | 系统化学习路径、实战项目 |
| **教育工作者** | 教师、培训机构讲师 | 课程管理、学生监控、教学资源 |
| **游客用户** | 对产品感兴趣的潜在用户 | 免费试用、快速体验核心功能 |

### 1.3 核心价值

- **降低学习门槛**: 游戏化机制让编程学习更有趣
- **AI 个性化辅导**: 根据学习进度提供定制化建议
- **即时反馈机制**: 代码实时运行，错误即时纠正
- **社区驱动学习**: 作品展示与交流激发学习动力
- **商业可持续**: 游客试用 + 付费会员模式

---

## 二、功能需求

### 2.1 用户系统

#### 2.1.1 用户角色

| 角色 | 权限 | 功能 |
|-----|------|------|
| **游客** | 免费试用 1 个月全部功能 | 学习课程、完成任务、积累经验 |
| **学生用户** | 完整账号功能 | 游客功能 + 永久保存进度 + 作品展示 |
| **教师用户** | 教学管理权限 | 创建课程、管理学生、查看数据 |
| **管理员** | 系统管理权限 | 全局设置、内容审核、数据分析 |

#### 2.1.2 认证功能

**功能列表**:
- [x] 邮箱注册/登录
- [x] OAuth 第三方登录（Google、GitHub）
- [x] 游客模式（自动分配临时账号）
- [x] 密码找回
- [x] 邮箱验证
- [x] 用户资料编辑

**游客试用逻辑**:
```
1. 用户首次访问 → 自动创建临时账号（guest_xxxxx）
2. 记录试用开始时间
3. 试用期 30 天，期间享有全部功能
4. 试用到期前 7 天开始提醒注册
5. 到期后保留数据 7 天，提示转为正式用户
6. 7 天后未注册则清理临时数据
```

#### 2.1.3 用户画像

**用户属性**:
- 基础信息: 用户名、头像、邮箱、注册时间
- 学习数据: 当前等级、总经验值、学习时长
- 游戏化属性: 金币数量、成就数量、排名
- 社交属性: 作品数、点赞数、关注数

---

### 2.2 课程与任务系统

#### 2.2.1 课程体系架构

```
Level 1: HTML5 基础 (10 课时)
├── 1.1 认识 HTML 标签
├── 1.2 文本与段落
├── 1.3 链接与图片
├── 1.4 列表与表格
├── 1.5 表单元素
├── 1.6 语义化标签
├── 1.7 多媒体元素
├── 1.8 Canvas 基础
├── 1.9 SVG 图形
└── 1.10 综合练习

Level 2: CSS 样式 (12 课时)
├── 2.1 CSS 选择器
├── 2.2 盒模型
├── 2.3 文本样式
├── 2.4 背景与边框
├── 2.5 布局基础（Flexbox）
├── 2.6 布局进阶（Grid）
├── 2.7 定位与层叠
├── 2.8 过渡与动画
├── 2.9 响应式设计
├── 2.10 CSS 变量
├── 2.11 预处理器简介
└── 2.12 综合练习

Level 3: JavaScript 基础 (15 课时)
├── 3.1 变量与数据类型
├── 3.2 运算符与表达式
├── 3.3 条件语句
├── 3.4 循环结构
├── 3.5 函数定义
├── 3.6 数组操作
├── 3.7 对象基础
├── 3.8 字符串处理
├── 3.9 数学运算
├── 3.10 日期时间
├── 3.11 JSON 处理
├── 3.12 错误处理
├── 3.13 ES6+ 新特性
├── 3.14 异步编程
└── 3.15 综合练习

Level 4: DOM 操作 (10 课时)
├── 4.1 DOM 树结构
├── 4.2 元素选择
├── 4.3 元素创建与删除
├── 4.4 属性操作
├── 4.5 样式操作
├── 4.6 事件监听
├── 4.7 事件委托
├── 4.8 表单验证
├── 4.9 动画控制
└── 4.10 综合练习

Level 5: 综合实战 (8 个项目)
├── 5.1 个人名片页
├── 5.2 计算器应用
├── 5.3 待办事项列表
├── 5.4 天气查询应用
├── 5.5 图片画廊
├── 5.6 简易游戏（打地鼠）
├── 5.7 音乐播放器
└── 5.8 毕业作品（自选主题）
```

#### 2.2.2 任务类型

| 任务类型 | 描述 | 难度 | 奖励 |
|---------|------|------|------|
| **填空题** | 补全代码片段 | ⭐ | 10 XP |
| **选择题** | 选择正确答案 | ⭐ | 5 XP |
| **实践题** | 独立完成代码 | ⭐⭐ | 20 XP |
| **挑战题** | 复杂问题解决 | ⭐⭐⭐ | 50 XP |
| **Boss 挑战** | AI 随机生成难题 | ⭐⭐⭐⭐ | 100 XP |
| **项目任务** | 完整作品开发 | ⭐⭐⭐⭐⭐ | 200 XP |

#### 2.2.3 任务评分机制

```javascript
// 评分算法
function calculateScore(submission) {
  let score = 0;
  
  // 代码正确性 (40%)
  if (submission.passAllTests) {
    score += 40;
  }
  
  // 代码质量 (30%)
  const qualityScore = analyzeCodeQuality(submission.code);
  score += qualityScore * 0.3;
  
  // 完成时间 (20%)
  const timeScore = calculateTimeBonus(submission.timeSpent);
  score += timeScore * 0.2;
  
  // AI 评估 (10%)
  const aiScore = await getAIAssessment(submission.code);
  score += aiScore * 0.1;
  
  return Math.round(score);
}
```

---

### 2.3 游戏化机制

#### 2.3.1 等级系统

| 等级 | 称号 | 所需 XP | 解锁内容 |
|------|------|---------|---------|
| Lv 1 | 新手程序员 | 0 | HTML 基础课程 |
| Lv 2 | 初级开发者 | 100 | CSS 样式课程 |
| Lv 3 | 见习工程师 | 300 | JavaScript 基础 |
| Lv 4 | 中级工程师 | 600 | DOM 操作 |
| Lv 5 | 高级工程师 | 1000 | 实战项目 |
| Lv 6 | 资深工程师 | 1500 | 高级挑战 |
| Lv 7 | 技术专家 | 2100 | AI Boss 挑战 |
| Lv 8 | 架构师 | 2800 | 项目导师权限 |
| Lv 9 | 技术大师 | 3600 | 自定义课程 |
| Lv 10 | 编程宗师 | 5000 | 全部功能 + 专属徽章 |

#### 2.3.2 成就系统

**成就分类**:

1. **学习里程碑**
   - 第一行代码: 完成第一个任务
   - 初学乍练: 完成 10 个任务
   - 学有所成: 完成 50 个任务
   - 学富五车: 完成 100 个任务

2. **完成度成就**
   - HTML 大师: 完成所有 HTML 课程
   - CSS 专家: 完成所有 CSS 课程
   - JS 高手: 完成所有 JavaScript 课程
   - 全栈新星: 完成所有课程

3. **质量成就**
   - 一次通过: 首次提交即通过
   - 完美主义者: 连续 10 次满分
   - 代码整洁: 获得 AI 代码质量 A 级评价

4. **时间成就**
   - 速度之王: 在限时挑战中排名前 10
   - 坚持不懈: 连续学习 7 天
   - 学习狂人: 连续学习 30 天

5. **社交成就**
   - 初露锋芒: 发布第一个作品
   - 人气之星: 作品获得 100 个赞
   - 导师之光: 帮助 10 个其他用户

#### 2.3.3 金币与商城

**金币获取途径**:
- 完成任务: 10-200 金币
- 每日登录: 5 金币
- 连续签到: 额外奖励（7 天 +50，30 天 +200）
- 作品点赞: 每个赞 1 金币
- 帮助他人: 每次 10 金币

**金币用途**:
- 购买代码主题（100-500 金币）
- 解锁高级课程（300-1000 金币）
- 兑换学习道具（提示卡、时间延长卡）
- 自定义头像边框（200-800 金币）

#### 2.3.4 排行榜

**榜单类型**:
1. **总经验榜** - 按总 XP 排序
2. **周活跃榜** - 按本周活跃度排序
3. **月进步榜** - 按本月 XP 增长排序
4. **作品热度榜** - 按作品点赞数排序
5. **速度挑战榜** - 按挑战完成时间排序

---

### 2.4 AI 助教系统 (CodeMentor DS)

#### 2.4.1 核心功能

**1. 代码讲解**
```
用户提交代码 → AI 分析代码结构 → 生成逐行讲解 → 标注关键点
```

**2. 错误诊断**
```
检测语法错误 → 分析逻辑错误 → 定位问题位置 → 给出修复建议
```

**3. 个性化建议**
```
分析学习数据 → 识别薄弱环节 → 推荐复习内容 → 规划学习路径
```

**4. 自动出题**
```
根据知识点 → 生成练习题 → 多种难度 → 自动评分
```

**5. 聊天指导**
```
自然语言提问 → AI 理解意图 → 生成针对性解答 → 代码示例
```

#### 2.4.2 AI 交互界面

```
┌─────────────────────────────────┐
│      CodeMentor DS (Lv3)        │
├─────────────────────────────────┤
│ 👤 用户: 为什么我的按钮不居中？  │
│                                 │
│ 🤖 AI: 您好！我看到您使用了      │
│    display: block; 但忘记设置    │
│    margin: 0 auto;              │
│    [查看示例代码]                │
│                                 │
│ 💡 建议阅读: CSS 布局基础        │
├─────────────────────────────────┤
│ [输入框]                  [发送] │
└─────────────────────────────────┘
```

#### 2.4.3 AI 调用策略

```javascript
// AI API 自动切换机制
const AI_PROVIDERS = [
  { name: 'DeepSeek', priority: 1 },
  { name: 'ZhipuAI', priority: 2 },
  { name: 'MoonShot', priority: 3 },
  { name: 'TongyiAI', priority: 4 },
  { name: 'DoubaoAI', priority: 5 }
];

async function callAI(prompt) {
  for (const provider of AI_PROVIDERS) {
    try {
      const response = await provider.call(prompt);
      return response;
    } catch (error) {
      console.log(`${provider.name} 失败，尝试下一个...`);
      continue;
    }
  }
  throw new Error('所有 AI 服务不可用');
}
```

---

### 2.5 在线代码编辑器

#### 2.5.1 编辑器布局

```
┌──────────────────────────────────────────────┐
│  [课程标题]           Lv3 - CSS 布局         │
├──────────┬──────────┬──────────┬────────────┤
│  HTML    │   CSS    │    JS    │  预览      │
├──────────┼──────────┼──────────┼────────────┤
│          │          │          │            │
│ 代码编辑 │ 代码编辑 │ 代码编辑 │  实时预览  │
│          │          │          │            │
│          │          │          │            │
├──────────┴──────────┴──────────┴────────────┤
│  [运行代码] [保存作品] [AI 助手] [提交答案]  │
├──────────────────────────────────────────────┤
│  控制台输出 / AI 反馈区域                     │
└──────────────────────────────────────────────┘
```

#### 2.5.2 编辑器功能

- [x] 语法高亮
- [x] 代码自动补全
- [x] 错误提示
- [x] 代码格式化
- [x] 快捷键支持
- [x] 多主题切换
- [x] 字体大小调整
- [x] 行号显示
- [x] 代码折叠
- [x] 搜索替换

#### 2.5.3 沙盒安全机制

```javascript
// Iframe 沙盒隔离
const sandboxConfig = {
  sandbox: 'allow-scripts',
  csp: "default-src 'none'; script-src 'unsafe-inline'",
  timeout: 5000, // 5 秒超时
  memoryLimit: '50MB'
};
```

---

### 2.6 社区与作品展示

#### 2.6.1 作品展示墙

**展示维度**:
- 最新作品
- 最热作品（按点赞数）
- 编辑推荐
- AI 精选作品
- 分类浏览（按技术栈、难度）

**作品卡片信息**:
```
┌─────────────────────┐
│   [作品缩略图]      │
├─────────────────────┤
│ 标题: 我的第一个网页 │
│ 作者: @username     │
│ 标签: HTML CSS      │
│ 💛 125  💬 23       │
│ [查看详情] [运行]    │
└─────────────────────┘
```

#### 2.6.2 互动功能

- [x] 点赞
- [x] 评论
- [x] 收藏
- [x] 分享
- [x] Fork（复制代码继续编辑）
- [x] 举报

#### 2.6.3 AI 作品点评

```
🤖 AI 点评:
这是一个制作精良的响应式网页！
✅ 优点:
  - 语义化 HTML 结构清晰
  - CSS Flexbox 布局运用得当
  - 色彩搭配和谐
  
💡 建议:
  - 可以添加过渡动画提升体验
  - 建议优化移动端适配
  
⭐ 综合评分: 8.5/10
```

---

### 2.7 教师功能（可选）

#### 2.7.1 课程管理

- 创建自定义课程
- 设计任务关卡
- 设置评分规则
- 发布/下架课程

#### 2.7.2 学生管理

- 查看学生列表
- 监控学习进度
- 查看代码提交
- 给予评价反馈

#### 2.7.3 数据分析

- 学生活跃度统计
- 课程完成率分析
- 难点问题识别
- 学习曲线可视化

---

## 三、非功能需求

### 3.1 性能要求

| 指标 | 目标 |
|------|------|
| 首屏加载时间 | < 2 秒 |
| 代码运行响应 | < 500ms |
| AI 回复速度 | < 3 秒 |
| 并发用户数 | 10,000+ |
| 数据库查询 | < 100ms |

### 3.2 安全要求

- [x] HTTPS 全站加密
- [x] JWT 身份验证
- [x] XSS/CSRF 防护
- [x] SQL 注入防护
- [x] 代码沙盒隔离
- [x] API 速率限制
- [x] 敏感数据加密存储

### 3.3 兼容性要求

**浏览器支持**:
- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

**设备支持**:
- 桌面端（主要）
- 平板端
- 移动端（响应式）

### 3.4 可用性要求

- 系统可用性: 99.9%
- 数据备份: 每日自动备份
- 灾难恢复: < 4 小时

---

## 四、商业模式

### 4.1 定价策略

| 套餐 | 价格 | 功能 |
|------|------|------|
| **游客试用** | 免费（30 天） | 全部功能临时体验 |
| **基础版** | ¥0/月 | 永久免费，基础课程 |
| **进阶版** | ¥19/月 | 解锁全部课程 + AI 无限次 |
| **专业版** | ¥49/月 | 进阶版 + 项目实战 + 1对1 辅导 |
| **教师版** | ¥99/月 | 教学管理功能 |

### 4.2 盈利模式

1. **订阅收入** - 付费会员
2. **企业培训** - B2B 服务
3. **广告收入** - 技术相关广告
4. **课程分销** - 第三方课程接入
5. **增值服务** - 代码托管、部署服务

---

## 五、项目里程碑

### Phase 1: MVP 开发 (Week 1-4)
- [x] 项目初始化与文档编写
- [ ] 用户系统（游客 + 注册登录）
- [ ] 课程体系（Level 1-2）
- [ ] 基础代码编辑器
- [ ] AI 助教基础功能

### Phase 2: 核心功能 (Week 5-8)
- [ ] 游戏化机制完整实现
- [ ] 课程体系（Level 3-5）
- [ ] 社区与作品展示
- [ ] 性能优化

### Phase 3: 完善与测试 (Week 9-10)
- [ ] 教师功能
- [ ] 数据分析
- [ ] 全面测试
- [ ] Bug 修复

### Phase 4: 上线运营 (Week 11-12)
- [ ] Netlify 部署
- [ ] SEO 优化
- [ ] 用户反馈收集
- [ ] 迭代优化

---

## 六、风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|-------|------|---------|
| AI API 不稳定 | 中 | 高 | 多 AI 服务冗余 |
| 用户留存率低 | 中 | 高 | 优化游戏化机制 |
| 服务器成本高 | 低 | 中 | 使用 Supabase 免费额度 |
| 内容质量参差 | 中 | 中 | AI + 人工双重审核 |
| 竞品压力 | 高 | 中 | 差异化特色（AI + 游戏化）|

---

## 七、成功指标 (KPI)

| 指标 | 目标 | 衡量周期 |
|------|------|---------|
| 注册用户数 | 10,000+ | 3 个月 |
| 日活跃用户 (DAU) | 1,000+ | 3 个月 |
| 游客转化率 | 15% | 持续监控 |
| 用户留存率（7 日）| 40% | 持续监控 |
| 课程完成率 | 60% | 持续监控 |
| 用户满意度 | 4.5/5.0 | 每月调查 |
| 付费转化率 | 5% | 6 个月 |

---

**文档维护**: 本文档随产品迭代持续更新  
**最后更新**: 2025-10-14  
**负责人**: AI Development Team

